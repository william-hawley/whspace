<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modern Oneâ€‘Page UI â€” Demo</title>
  <meta name="description" content="Sleek modern single-file front-end demo with many UI features (no sign-in)." />
  <meta name="theme-color" content="#0f1724" />
  <style>
    /* ====== Variables & Reset ====== */
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#7c5cff; --glass: rgba(255,255,255,0.04);
      --glass-2: rgba(255,255,255,0.02);
      --success: #22c55e; --danger:#ef4444; --radius:14px; --maxw:1100px;
      --ease: cubic-bezier(.2,.9,.3,1);
      color-scheme: dark; /* prefers dark by default */
    }
    *{box-sizing:border-box}
    html,body,#app{height:100%}
    body{
      margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background: linear-gradient(180deg,var(--bg),#071028 140%); color:#e6eef8; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      line-height:1.45; padding:40px 20px;
      display:flex; justify-content:center; align-items:flex-start;
    }
    .wrap{width:100%; max-width:var(--maxw);}
    /* ====== NAV ====== */
    header{display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:28px}
    .brand{display:flex; gap:12px; align-items:center}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#4ad0ff);display:flex;align-items:center;justify-content:center;font-weight:700}
    nav{display:flex; gap:12px; align-items:center}
    nav a{color:var(--muted); text-decoration:none; padding:8px 12px; border-radius:10px; font-weight:600}
    nav a:hover{color:var(--accent); background:var(--glass)}
    .controls{display:flex; gap:10px; align-items:center}
    .btn{background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);cursor:pointer;font-weight:700}
    .btn.primary{background:linear-gradient(90deg,var(--accent),#4ad0ff); color:#062; color:white; border:none}
    .search{display:flex; align-items:center; gap:8px; padding:6px 10px; background:var(--glass-2); border-radius:999px; border:1px solid rgba(255,255,255,0.03)}
    .search input{background:transparent;border:none;outline:none;color:inherit;width:180px}
    /* ====== HERO ====== */
    .hero{display:grid; grid-template-columns:1fr 420px; gap:28px; align-items:center; margin-bottom:28px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:22px; border-radius:var(--radius); border:1px solid rgba(255,255,255,0.03)}
    h1{font-size:28px;margin:0 0 8px}
    p.lead{color:var(--muted); margin:0 0 18px}
    .kpis{display:flex; gap:12px}
    .kpi{background:linear-gradient(180deg, rgba(255,255,255,0.015), transparent); padding:12px; border-radius:12px; min-width:100px; text-align:center}
    .kpi strong{display:block;font-size:18px}
    .media-card{height:320px; border-radius:12px; overflow:hidden; display:flex; flex-direction:column}
    .media-card .media-top{flex:1; background:linear-gradient(120deg,var(--accent),#4ad0ff); display:flex;align-items:center;justify-content:center;font-size:18px}
    .media-card .media-btm{padding:12px}
    /* ====== GRID SECTIONS ====== */
    .grid-3{display:grid; grid-template-columns:repeat(3,1fr); gap:12px}
    .grid-2{display:grid; grid-template-columns:1fr 360px; gap:12px}

    /* Portfolio */
    .filters{display:flex; gap:8px; margin-bottom:12px}
    .chip{padding:8px 12px;border-radius:999px;background:var(--glass); border:1px solid rgba(255,255,255,0.02); cursor:pointer}
    .chip.active{background:linear-gradient(90deg,var(--accent),#4ad0ff); color:#062}
    .tiles{display:grid; grid-template-columns:repeat(3,1fr); gap:10px}
    .tile{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); padding:10px; border-radius:12px; cursor:pointer; border:1px solid rgba(255,255,255,0.02)}
    .tile img{width:100%; height:140px; object-fit:cover; border-radius:8px}

    /* Testimonials carousel */
    .carousel{position:relative; overflow:hidden}
    .slides{display:flex; gap:10px; transition:transform .6s var(--ease)}
    .slide{min-width:100%; padding:18px}

    /* Forms and modal */
    form .row{display:flex; gap:10px}
    input,textarea,select{background:transparent;border:1px solid rgba(255,255,255,0.06); padding:10px;border-radius:10px;color:inherit; outline:none}
    textarea{min-height:100px}
    .note{color:var(--muted); font-size:13px}
    .modal{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.6); z-index:40; opacity:0; pointer-events:none; transition:opacity .2s}
    .modal.open{opacity:1; pointer-events:all}
    .modal .panel{width:92%; max-width:760px}

    /* Utilities */
    .row-v{display:flex; gap:12px}
    .badge{padding:6px 8px;border-radius:8px;background:var(--glass)}
    footer{margin-top:30px; text-align:center; color:var(--muted); font-size:13px}

    /* Responsive */
    @media (max-width:900px){
      .hero{grid-template-columns:1fr;}
      .grid-3{grid-template-columns:repeat(2,1fr)}
      .tiles{grid-template-columns:repeat(2,1fr)}
    }
    @media (max-width:520px){
      .grid-3{grid-template-columns:1fr}
      .tiles{grid-template-columns:1fr}
      nav{display:none}
      .search input{width:100px}
      body{padding:20px}
    }

    /* Tiny animations */
    .fade-up{transform:translateY(8px); opacity:0; transition:all .6s var(--ease)}
    .inview{transform:none; opacity:1}

    /* Dark/light toggle overrides */
    :root.light{--bg:#f6f9ff; --card:#ffffff; --muted:#475569; --accent:#7c5cff; color-scheme:light; --glass: rgba(2,6,23,0.03)}
    :root.light body{color:#0b1220}
  </style>
</head>
<body>
  <div class="wrap" id="app">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden>MD</div>
        <div>
          <div style="font-weight:800">ModernDemo</div>
          <div style="font-size:12px;color:var(--muted)">Sleek single-file front-end</div>
        </div>
      </div>

      <nav aria-label="Main navigation">
        <a href="#features">Features</a>
        <a href="#portfolio">Portfolio</a>
        <a href="#pricing">Pricing</a>
        <a href="#contact">Contact</a>
      </nav>

      <div class="controls">
        <div class="search" role="search" aria-label="Site search">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.4"/></svg>
          <input id="globalSearch" placeholder="Search items, features..." />
        </div>
        <button class="btn" id="darkToggle" aria-pressed="false" title="Toggle dark/light">ðŸŒ“</button>
        <button class="btn primary" id="openDemo" title="Open demo modal">Try demo</button>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="card fade-up">
          <h1>All-in-one modern front-end â€” single file</h1>
          <p class="lead">A compact but feature-rich demo: responsive layout, accessible controls, gallery, filters, charts, localStorage state, drag & drop, client-side validation, toast notifications, and more â€” all without a server or signâ€‘in.</p>

          <div class="kpis" role="list">
            <div class="kpi" role="listitem"><small class="note">Users</small><strong id="kpi-users">12.4k</strong></div>
            <div class="kpi" role="listitem"><small class="note">Projects</small><strong id="kpi-projects">86</strong></div>
            <div class="kpi" role="listitem"><small class="note">Uptime</small><strong id="kpi-uptime">99.99%</strong></div>
          </div>

          <div style="margin-top:16px; display:flex; gap:8px; align-items:center">
            <button class="btn primary" id="cta-start">Get started</button>
            <button class="btn" id="cta-tour">Product tour</button>
            <div class="badge" aria-hidden>v1.0</div>
          </div>

          <div style="margin-top:14px">
            <label class="note">Quick actions</label>
            <div style="display:flex; gap:8px; margin-top:8px">
              <button class="btn" data-action="add-sample">+ Add sample</button>
              <button class="btn" data-action="clear-storage">Clear storage</button>
              <button class="btn" id="exportJSON">Export JSON</button>
            </div>
          </div>
        </div>

        <aside class="card media-card fade-up" aria-label="Demo media">
          <div class="media-top" id="mediaCanvas" role="img" aria-label="Interactive demo canvas">Interactive chart preview</div>
          <div class="media-btm">
            <div style="display:flex; justify-content:space-between; align-items:center">
              <div>
                <div style="font-weight:700">Live Chart</div>
                <div class="note">Canvas chart, editable</div>
              </div>
              <div style="display:flex; gap:8px">
                <button class="btn" id="randomize">Randomize</button>
                <button class="btn" id="downloadPNG">PNG</button>
              </div>
            </div>
          </div>
        </aside>
      </section>

      <section id="features" class="card fade-up" style="margin-bottom:18px;">
        <h2>Features</h2>
        <div class="grid-3" style="margin-top:12px">
          <div class="card" tabindex="0">
            <h3>Responsive UI</h3>
            <p class="note">Grid, responsive breakpoints, accessible nav, keyboard friendly.</p>
          </div>
          <div class="card" tabindex="0">
            <h3>Portfolio & Filters</h3>
            <p class="note">Client-side filtering, search, pagination and lightbox gallery.</p>
          </div>
          <div class="card" tabindex="0">
            <h3>Local state</h3>
            <p class="note">LocalStorage for user data, theme preference and todo list.</p>
          </div>
        </div>
      </section>

      <section id="portfolio" class="card fade-up" style="margin-bottom:18px">
        <h2>Portfolio</h2>
        <div class="filters" role="toolbar" aria-label="Filter projects">
          <button class="chip active" data-filter="all">All</button>
          <button class="chip" data-filter="web">Web</button>
          <button class="chip" data-filter="mobile">Mobile</button>
          <button class="chip" data-filter="design">Design</button>
        </div>

        <div style="display:flex; gap:12px; margin-bottom:10px; align-items:center">
          <input id="portfolioSearch" placeholder="Search projects..." style="flex:1; padding:8px; border-radius:10px; border:1px solid rgba(255,255,255,0.03); background:transparent;color:inherit" />
          <select id="sortBy" aria-label="Sort by" style="padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:inherit">
            <option value="new">Newest</option>
            <option value="popular">Most popular</option>
            <option value="alpha">A â†’ Z</option>
          </select>
        </div>

        <div class="tiles" id="portfolioTiles" aria-live="polite"></div>

        <div style="display:flex; justify-content:center; gap:8px; margin-top:12px">
          <button class="btn" id="prevPage">Prev</button>
          <div class="note" id="pager">Page 1</div>
          <button class="btn" id="nextPage">Next</button>
        </div>
      </section>

      <section id="interactive" class="grid-2" style="margin-bottom:18px">
        <div class="card fade-up">
          <h3>Todo (localStorage)</h3>
          <form id="todoForm" aria-label="Todo form">
            <div class="row" style="margin-bottom:8px">
              <input id="todoText" placeholder="Buy coffee" />
              <button class="btn" type="submit">Add</button>
            </div>
            <ul id="todoList" style="list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px"></ul>
          </form>

          <hr style="margin:12px 0;border:none;border-top:1px solid rgba(255,255,255,0.03)" />
          <h3>Drag & Drop Upload</h3>
          <div id="dropzone" style="padding:16px;border-radius:10px;border:2px dashed rgba(255,255,255,0.03); text-align:center">Drop files here or click to choose
            <input id="fileInput" type="file" multiple style="display:none" />
            <div id="uploadPreview" style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px"></div>
          </div>
        </div>

        <div class="card fade-up">
          <h3>Contact form (client-side validation)</h3>
          <form id="contactForm" novalidate>
            <div style="margin-bottom:8px"><input id="name" placeholder="Your name" required /></div>
            <div style="margin-bottom:8px"><input id="email" type="email" placeholder="you@example.com" required/></div>
            <div style="margin-bottom:8px"><textarea id="message" placeholder="How can we help?" required></textarea></div>
            <div style="display:flex; gap:8px; align-items:center">
              <button class="btn primary" type="submit">Send</button>
              <div id="contactStatus" class="note"></div>
            </div>
          </form>

          <hr style="margin:12px 0;border:none;border-top:1px solid rgba(255,255,255,0.03)" />
          <h3>Sortable list</h3>
          <div id="sortList" style="display:flex;flex-direction:column;gap:8px">
            <div class="badge" draggable="true">Item A</div>
            <div class="badge" draggable="true">Item B</div>
            <div class="badge" draggable="true">Item C</div>
          </div>
        </div>
      </section>

      <section id="pricing" class="card fade-up" style="margin-bottom:18px">
        <h2>Pricing</h2>
        <div class="grid-3" style="margin-top:12px">
          <div class="card">
            <h3>Free</h3>
            <div class="note">For hobby projects</div>
            <div style="margin-top:12px;font-weight:800">$0<span class="note">/mo</span></div>
            <ul class="note">
              <li>Basic features</li>
              <li>Community support</li>
            </ul>
            <button class="btn primary">Choose</button>
          </div>
          <div class="card">
            <h3>Pro</h3>
            <div class="note">For professionals</div>
            <div style="margin-top:12px;font-weight:800">$12<span class="note">/mo</span></div>
            <ul class="note">
              <li>Advanced features</li>
              <li>Priority support</li>
            </ul>
            <button class="btn primary">Choose</button>
          </div>
          <div class="card">
            <h3>Enterprise</h3>
            <div class="note">Team & Large</div>
            <div style="margin-top:12px;font-weight:800">Contact</div>
            <ul class="note">
              <li>Custom plans</li>
            </ul>
            <button class="btn">Contact</button>
          </div>
        </div>
      </section>

      <section id="extras" class="card fade-up" style="margin-bottom:18px">
        <h2>Extras</h2>
        <div style="display:flex; gap:12px; align-items:center">
          <div>
            <div class="note">Keyboard shortcuts</div>
            <div class="note">Press <kbd>?</kbd> for help</div>
          </div>
          <div style="margin-left:auto">
            <button class="btn" id="openHelp">Help</button>
          </div>
        </div>
      </section>

      <footer>
        Built with care â€¢ Demo UI â€” no sign-in â€¢ <span id="year"></span>
      </footer>
    </main>

    <!-- Modal (demo) -->
    <div class="modal" id="demoModal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="card panel">
        <div style="display:flex; justify-content:space-between; align-items:center">
          <h3>Interactive Demo</h3>
          <button class="btn" id="closeModal">Close</button>
        </div>
        <p class="note">This modal demonstrates programmatic UI: charts, downloads, and theme toggling. Try the controls.</p>
        <canvas id="modalChart" height="180" style="width:100%;border-radius:8px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);display:block"></canvas>
      </div>
    </div>

    <!-- Toast container -->
    <div id="toasts" style="position:fixed; right:20px; bottom:20px; display:flex; flex-direction:column; gap:8px; z-index:60"></div>
  </div>

  <script>
    /* ====== Utility helpers ====== */
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));
    const toast = (msg,opts={})=>{
      const id = Math.random().toString(36).slice(2,9);
      const el = document.createElement('div');
      el.className='card'; el.style.padding='10px 14px'; el.style.minWidth='160px'; el.innerHTML = '<strong>'+msg+'</strong>';
      $('#toasts').appendChild(el);
      setTimeout(()=> el.remove(), opts.timeout||3500);
    }

    // small in-view observer for animation
    const io = new IntersectionObserver((entries)=>entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('inview') }),{threshold:0.12});
    $$('[class*=fade-up]').forEach(n=>io.observe(n));

    // theme handling
    const root = document.documentElement;
    const themeKey = 'demo_theme';
    const setTheme = t=>{ if(t==='light') root.classList.add('light'); else root.classList.remove('light'); localStorage.setItem(themeKey,t)};
    const cur = localStorage.getItem(themeKey) || 'dark'; setTheme(cur);
    $('#darkToggle').addEventListener('click', ()=>{ const next = root.classList.contains('light') ? 'dark' : 'light'; setTheme(next); $('#darkToggle').setAttribute('aria-pressed', next==='light'); toast('Theme: '+next); });

    // year
    $('#year').textContent = new Date().getFullYear();

    /* ====== Modal ====== */
    const demoModal = $('#demoModal');
    $('#openDemo').addEventListener('click', ()=>{ demoModal.classList.add('open'); demoModal.setAttribute('aria-hidden','false'); buildModalChart(); });
    $('#closeModal').addEventListener('click', ()=>{ demoModal.classList.remove('open'); demoModal.setAttribute('aria-hidden','true'); });

    // Close modal on esc
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') { demoModal.classList.remove('open'); demoModal.setAttribute('aria-hidden','true'); } });

    /* ====== Simple Chart (canvas) ====== */
    function makeChart(canvas, data){
      const ctx = canvas.getContext('2d');
      const w = canvas.clientWidth; const h = canvas.height; canvas.width = w*devicePixelRatio; canvas.height = h*devicePixelRatio; ctx.scale(devicePixelRatio,devicePixelRatio);
      // draw background
      ctx.clearRect(0,0,w,h);
      // grid
      ctx.strokeStyle = 'rgba(255,255,255,0.04)'; ctx.lineWidth = 1;
      for(let y=20;y<h;y+=30){ ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(w,y); ctx.stroke(); }
      // area line
      ctx.beginPath(); ctx.moveTo(10, h-10 - (data[0]/100)*(h-30));
      data.forEach((v,i)=>{ const x = 10 + (i/(data.length-1))*(w-20); const y = h-10 - (v/100)*(h-30); ctx.lineTo(x,y); });
      ctx.lineWidth=2; ctx.strokeStyle='rgba(124,92,255,0.9)'; ctx.stroke();
      // fill
      ctx.lineTo(w-10,h-10); ctx.lineTo(10,h-10); ctx.closePath();
      const g = ctx.createLinearGradient(0,0,0,h); g.addColorStop(0,'rgba(124,92,255,0.16)'); g.addColorStop(1,'rgba(124,92,255,0.02)'); ctx.fillStyle = g; ctx.fill();
    }

    const sampleData = ()=> Array.from({length:8},()=> Math.round(20 + Math.random()*80));
    const mediaCanvas = document.createElement('canvas'); mediaCanvas.height=320; mediaCanvas.style.width='100%'; mediaCanvas.style.height='100%'; $('#mediaCanvas').innerHTML=''; $('#mediaCanvas').appendChild(mediaCanvas);
    makeChart(mediaCanvas, sampleData());

    function buildModalChart(){ const c = $('#modalChart'); makeChart(c, sampleData()); }
    $('#randomize').addEventListener('click', ()=> makeChart(mediaCanvas, sampleData()));
    $('#downloadPNG').addEventListener('click', ()=>{
      const uri = mediaCanvas.toDataURL('image/png'); const a = document.createElement('a'); a.href = uri; a.download = 'chart.png'; a.click(); toast('PNG downloaded');
    });

    /* ====== Portfolio data, search, filter, pagination ====== */
    const portfolio = Array.from({length:17}).map((_,i)=>({
      id:i+1,
      title: ['Aurora','Nebula','Ora','Flux','Pulse','Tide'][i%6] + ' Project '+(i+1),
      tags: (i%3===0)? ['web'] : (i%3===1)? ['mobile'] : ['design'],
      img: 'https://picsum.photos/seed/p'+(i+1)+'/600/400'
    }));

    // render tiles with pagination
    let page = 1, perPage = 6; function renderTiles(){
      const filter = $$('.chip.active')[0].dataset.filter;
      const q = $('#portfolioSearch').value.trim().toLowerCase();
      const filtered = portfolio.filter(p=> (filter==='all' || p.tags.includes(filter)) && (p.title.toLowerCase().includes(q)));
      const pages = Math.max(1, Math.ceil(filtered.length/perPage)); if(page>pages) page=pages;
      const start=(page-1)*perPage; const items = filtered.slice(start, start+perPage);
      const container = $('#portfolioTiles'); container.innerHTML=''; items.forEach(it=>{
        const el = document.createElement('div'); el.className='tile'; el.tabIndex=0; el.setAttribute('role','button'); el.innerHTML = `<img loading=lazy src="${it.img}" alt="${it.title}"><div style='margin-top:8px;font-weight:700'>${it.title}</div><div class='note'>${it.tags.join(', ')}</div>`;
        el.addEventListener('click', ()=> openLightbox(it));
        container.appendChild(el);
      });
      $('#pager').textContent = `Page ${page} of ${pages}`;
    }
    // chip toggle
    $$('.chip').forEach(c=> c.addEventListener('click', ()=>{ $$('.chip').forEach(x=>x.classList.remove('active')); c.classList.add('active'); page=1; renderTiles(); }));
    $('#portfolioSearch').addEventListener('input', ()=>{ page=1; renderTiles(); });
    $('#prevPage').addEventListener('click', ()=>{ if(page>1){ page--; renderTiles(); }});
    $('#nextPage').addEventListener('click', ()=>{ page++; renderTiles(); });
    renderTiles();

    // lightbox
    function openLightbox(item){
      const modal = document.createElement('div'); modal.className='modal open'; modal.style.zIndex=120; modal.innerHTML = `<div class='card panel' style='max-width:820px'><div style='display:flex;justify-content:space-between;align-items:center'><h3>${item.title}</h3><button class='btn close'>Close</button></div><img src='${item.img}' style='width:100%;border-radius:8px;margin-top:8px'/><p class='note' style='margin-top:8px'>Tags: ${item.tags.join(', ')}</p></div>`;
      document.body.appendChild(modal);
      modal.querySelector('.close').addEventListener('click', ()=> modal.remove());
      modal.addEventListener('click', (e)=>{ if(e.target===modal) modal.remove(); });
    }

    /* ====== Todo with localStorage ====== */
    const todoKey = 'demo_todos';
    function loadTodos(){ const raw = localStorage.getItem(todoKey); return raw? JSON.parse(raw):[] }
    function saveTodos(t){ localStorage.setItem(todoKey, JSON.stringify(t)); }
    function renderTodos(){ const ul = $('#todoList'); ul.innerHTML=''; loadTodos().forEach((t,i)=>{ const li=document.createElement('li'); li.innerHTML=`<div style='display:flex;align-items:center;gap:8px'><input type='checkbox' data-i='${i}' ${t.done?'checked':''}/> <div style='flex:1'>${escapeHtml(t.text)}</div> <button class='btn' data-del='${i}'>Del</button></div>`; ul.appendChild(li); }); }
    function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;'); }
    $('#todoForm').addEventListener('submit', (e)=>{ e.preventDefault(); const v=$('#todoText').value.trim(); if(!v) return toast('Enter todo'); const t = loadTodos(); t.push({text:v, done:false}); saveTodos(t); $('#todoText').value=''; renderTodos(); toast('Added'); });
    $('#todoList').addEventListener('click', (e)=>{ if(e.target.matches('[data-del]')){ const i=+e.target.dataset.del; const t=loadTodos(); t.splice(i,1); saveTodos(t); renderTodos(); } });
    $('#todoList').addEventListener('change', (e)=>{ if(e.target.matches('[type=checkbox]')){ const i=+e.target.dataset.i; const t=loadTodos(); t[i].done = e.target.checked; saveTodos(t); } });
    renderTodos();

    /* ====== Drag & Drop file preview ====== */
    const drop = $('#dropzone'); const fileInput = $('#fileInput'); drop.addEventListener('click', ()=> fileInput.click());
    fileInput.addEventListener('change', (e)=> handleFiles(e.target.files));
    ['dragenter','dragover'].forEach(ev=> drop.addEventListener(ev, (e)=>{ e.preventDefault(); drop.style.borderColor='rgba(124,92,255,0.6)'; }));
    ['dragleave','drop'].forEach(ev=> drop.addEventListener(ev, (e)=>{ e.preventDefault(); drop.style.borderColor='rgba(255,255,255,0.03)'; }));
    drop.addEventListener('drop', (e)=> handleFiles(e.dataTransfer.files));
    function handleFiles(files){ const out = $('#uploadPreview'); out.innerHTML=''; Array.from(files).slice(0,8).forEach(f=>{ const fr = new FileReader(); if(f.type.startsWith('image/')){ fr.onload = ()=>{ const i = document.createElement('img'); i.src = fr.result; i.style.width='120px'; i.style.height='80px'; i.style.objectFit='cover'; i.style.borderRadius='8px'; out.appendChild(i); }; fr.readAsDataURL(f); } else { const d = document.createElement('div'); d.className='badge'; d.textContent = f.name; out.appendChild(d); } }); toast('Files processed'); }

    /* ====== Contact form validation (client-side) ====== */
    $('#contactForm').addEventListener('submit', (e)=>{ e.preventDefault(); const name=$('#name').value.trim(); const email=$('#email').value.trim(); const msg=$('#message').value.trim(); if(!name||!email||!msg){ $('#contactStatus').textContent='Please fill all fields'; return; } if(!/.+@.+\..+/.test(email)){ $('#contactStatus').textContent='Invalid email'; return; } $('#contactStatus').textContent='Sending...'; setTimeout(()=>{ $('#contactStatus').textContent='Sent â€” thanks!'; toast('Message sent (demo)'); $('#contactForm').reset(); }, 800); });

    /* ====== Sortable list drag & drop ====== */
    let dragEl=null; $$('#sortList .badge').forEach(el=>{
      el.addEventListener('dragstart', ()=>{ dragEl=el; el.style.opacity=0.4; });
      el.addEventListener('dragend', ()=>{ dragEl=null; el.style.opacity=1; });
      el.addEventListener('dragover', (e)=>{ e.preventDefault(); });
      el.addEventListener('drop', (e)=>{ e.preventDefault(); if(dragEl && dragEl!==el){ const parent = el.parentNode; parent.insertBefore(dragEl, el); toast('Order updated'); } });
    });

    /* ====== Export/Import sample data ====== */
    $('#exportJSON').addEventListener('click', ()=>{ const dump = {todos:loadTodos(), theme: localStorage.getItem(themeKey) || 'dark'}; const a = document.createElement('a'); a.href = 'data:application/json;charset=utf-8,'+encodeURIComponent(JSON.stringify(dump, null, 2)); a.download = 'demo-export.json'; a.click(); toast('Export ready'); });
    $$('[data-action="add-sample"]').forEach(b=> b.addEventListener('click', ()=>{ const t=loadTodos(); t.push({text:'Sample '+(t.length+1), done:false}); saveTodos(t); renderTodos(); toast('Sample added'); }));
    $$('[data-action="clear-storage"]').forEach(b=> b.addEventListener('click', ()=>{ localStorage.clear(); renderTodos(); toast('Storage cleared'); location.reload(); }));

    /* ====== Simple keyboard help modal ====== */
    $('#openHelp').addEventListener('click', ()=>{
      const m = document.createElement('div'); m.className='modal open'; m.innerHTML=`<div class='card panel'><h3>Keyboard Shortcuts</h3><ul class='note'><li><strong>?</strong> Help</li><li><strong>Ctrl/Cmd + K</strong> Focus search</li><li><strong>Esc</strong> Close modals</li></ul><button class='btn close'>Close</button></div>`; document.body.appendChild(m); m.querySelector('.close').addEventListener('click', ()=>m.remove()); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='?'){ e.preventDefault(); $('#openHelp').click(); } if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='k'){ e.preventDefault(); $('#globalSearch').focus(); } });

    /* ====== Simple accessibility helpers ====== */
    document.addEventListener('click', (e)=>{ if(e.target.matches('a[href^="#"]')){ const id = e.target.getAttribute('href').slice(1); const el = document.getElementById(id); if(el){ e.preventDefault(); el.scrollIntoView({behavior:'smooth'}); el.focus({preventScroll:true}); } } });

    /* ====== Demo: simple service worker registration (inline blob) ====== */
    if('serviceWorker' in navigator){
      const swCode = `self.addEventListener('install', e=>{ self.skipWaiting(); }); self.addEventListener('fetch', e=>{ /* noop - demo only */ });`;
      const blob = new Blob([swCode], {type:'application/javascript'});
      navigator.serviceWorker.register(URL.createObjectURL(blob)).then(()=>console.log('sw registered')).catch(()=>{});
    }

    /* ====== Small state: KPI counters animation ====== */
    function animateNum(el, to){ const from = +el.textContent.replace(/[^0-9.]/g,'') || 0; const dur=800; const start=performance.now(); const step=(t)=>{ const p=Math.min(1,(t-start)/dur); el.textContent = Math.round(from + (to-from)*p).toLocaleString(); if(p<1) requestAnimationFrame(step); }; requestAnimationFrame(step); }
    animateNum($('#kpi-users'), 12400); animateNum($('#kpi-projects'), 86);

    /* ====== Global search filters several sections ====== */
    $('#globalSearch').addEventListener('input', (e)=>{
      const q = e.target.value.trim().toLowerCase(); // search portfolio titles and todos
      // portfolio filter
      if(q.length>0){ page=1; $('#portfolioSearch').value=q; renderTiles(); } else { $('#portfolioSearch').value=''; renderTiles(); }
    });

    /* ====== Small accessibility: focus outlines for keyboard users ====== */
    document.body.addEventListener('keydown', (e)=> document.documentElement.classList.add('show-focus'));

    /* ====== Initialize helpful bits ====== */
    // Preload a few images
    portfolio.slice(0,6).forEach(p=>{ const i=new Image(); i.src=p.img; });

    // quick file: download demo html
    document.addEventListener('keydown', (e)=>{ if(e.altKey && e.key.toLowerCase()==='s'){ e.preventDefault(); toast('Saving demo'); const a=document.createElement('a'); a.href = 'data:text/html;charset=utf-8,'+encodeURIComponent(document.documentElement.outerHTML); a.download='modern_onepage_website.html'; a.click(); } });

    // small: show initial toast
    toast('Demo loaded');
  </script>
</body>
</html>
